/* src/sidebar/webview/style.css */

body {
	font-family: var(--vscode-font-family, sans-serif);
	padding: 0 10px 10px 10px; /* No top padding, rely on controls */
	color: var(--vscode-editor-foreground);
	background-color: var(--vscode-sideBar-background);
	display: flex; /* Use flexbox for layout */
	flex-direction: column;
	height: 100vh; /* Make body take full viewport height */
	box-sizing: border-box;
	overflow: hidden; /* Prevent body scrollbar, rely on chat container scroll */
}

h1,
h2 {
	color: var(--vscode-sideBar-titleForeground);
	border-bottom: 1px solid
		var(--vscode-editorWidget-border, var(--vscode-contrastBorder));
	padding-bottom: 5px;
	font-weight: normal;
	margin-top: 15px; /* Margin for sections */
	margin-bottom: 10px;
}

/* Chat Header/Controls */
.chat-controls {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 5px 0; /* Vertical padding */
	border-bottom: 1px solid var(--vscode-input-border);
	flex-shrink: 0; /* Prevent shrinking */
}
.chat-controls h1 {
	margin: 0; /* Remove default margins */
	border-bottom: none;
	flex-grow: 1; /* Allow title to take space */
	font-size: 1.1em; /* Slightly larger title */
}
.chat-controls div button {
	margin-left: 4px; /* Space between control buttons */
}

/* Chat Message Container */
#chat-container {
	flex-grow: 1; /* Allow chat to take remaining vertical space */
	overflow-y: auto; /* Enable vertical scroll */
	border: 1px solid var(--vscode-input-border, var(--vscode-contrastBorder));
	padding: 8px;
	background-color: var(--vscode-editor-background);
	margin-top: 5px; /* Space below chat controls */
	margin-bottom: 10px; /* Space above input */
	min-height: 50px; /* Ensure it doesn't collapse completely */
}

/* Individual Messages */
.message {
	margin-bottom: 8px;
	padding: 6px 8px;
	border-radius: 4px;
	word-wrap: break-word;
	line-height: 1.4;
}
.message strong {
	margin-right: 5px;
}
.user-message {
	background-color: var(--vscode-list-activeSelectionBackground);
	color: var(--vscode-list-activeSelectionForeground);
}
.ai-message {
	background-color: var(
		--vscode-textBlockQuote-background,
		var(--vscode-editorWidget-background)
	);
}
.system-message,
.loading-message {
	color: var(--vscode-descriptionForeground);
	font-style: italic;
	text-align: center;
	background: none;
	padding: 2px;
	margin-top: 10px;
	margin-bottom: 10px;
}
.error-message {
	background-color: rgba(255, 100, 100, 0.1);
	color: var(--vscode-errorForeground);
	border-left: 3px solid var(--vscode-errorForeground);
}

/* Input Area */
#input-container {
	display: flex;
	align-items: stretch; /* Align items vertically */
	margin-bottom: 10px;
	flex-shrink: 0; /* Prevent shrinking */
}
#chat-input {
	flex-grow: 1;
	margin-right: 5px;
	background-color: var(--vscode-input-background);
	border: 1px solid var(--vscode-input-border);
	color: var(--vscode-input-foreground);
	padding: 6px 8px;
	font-family: var(--vscode-editor-font-family, monospace);
	font-size: var(--vscode-editor-font-size);
	border-radius: 2px;
	resize: none; /* Disable manual resize */
}
#input-container button#send-button {
	flex-shrink: 0; /* Prevent send button from shrinking */
}

/* General Status Area */
#status-area {
	font-size: 0.9em;
	color: var(--vscode-descriptionForeground);
	min-height: 1.2em; /* Reserve space even when empty */
	text-align: center;
	padding: 2px 0 5px 0;
	flex-shrink: 0; /* Prevent shrinking */
}

/* API Key Section */
.section {
	margin-top: 10px;
	border-top: 1px solid
		var(--vscode-editorWidget-border, var(--vscode-contrastBorder));
	padding-top: 10px;
	flex-shrink: 0; /* Prevent shrinking */
}
.key-management-controls {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 8px;
	flex-wrap: nowrap;
}
.key-management-controls span#current-key-display {
	font-size: 0.9em;
	color: var(--vscode-descriptionForeground);
	margin: 0 5px;
	text-align: center;
	flex-grow: 1;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}
.add-key-container {
	display: flex;
	margin-top: 8px;
	align-items: stretch;
}
#add-key-input {
	flex-grow: 1;
	margin-right: 5px;
	background-color: var(--vscode-input-background);
	border: 1px solid var(--vscode-input-border);
	color: var(--vscode-input-foreground);
	padding: 6px 8px;
	border-radius: 2px;
}
#api-key-status {
	font-size: 0.9em;
	margin-top: 5px;
	color: var(--vscode-descriptionForeground);
	min-height: 1.2em;
	text-align: center;
}
.section p small {
	font-size: 0.85em;
	color: var(--vscode-descriptionForeground);
}

/* --- Generic Button Styling (Text Buttons) --- */
button {
	/* Apply basic styles to all buttons first */
	padding: 6px 10px;
	background-color: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	border: 1px solid var(--vscode-button-border, var(--vscode-button-background)); /* Use background as fallback border */
	border-radius: 2px;
	cursor: pointer;
	font-size: var(--vscode-font-size);
	text-align: center;
	min-width: 30px; /* Ensure some minimum width */
	flex-shrink: 0; /* Prevent buttons from shrinking unexpectedly */
}

button:hover {
	background-color: var(--vscode-button-hoverBackground);
}

button:disabled {
	opacity: 0.6;
	cursor: not-allowed;
	background-color: var(
		--vscode-button-secondaryBackground,
		var(--vscode-disabledForeground)
	); /* Fallback for disabled */
	color: var(
		--vscode-button-secondaryForeground,
		var(--vscode-descriptionForeground)
	);
	border-color: var(--vscode-button-secondaryBackground, transparent);
}

/* --- Specific Button Group Adjustments --- */

/* Chat controls (Save/Load/Clear) might be smaller */
.chat-controls button {
	padding: 4px 8px; /* Slightly smaller padding */
	/* Use secondary style potentially for less emphasis? Optional. */
	/* background-color: var(--vscode-button-secondaryBackground); */
	/* color: var(--vscode-button-secondaryForeground); */
}
.chat-controls button:hover {
	background-color: var(
		--vscode-button-hoverBackground
	); /* Keep standard hover */
}

/* Key controls (<, >, Del) might be smaller */
.key-management-controls button {
	padding: 4px 8px; /* Slightly smaller padding */
}

/* General Button Styling */
.chat-controls button,
.key-management-controls button,
#input-container button,
#add-key-button {
	padding: 6px 10px; /* More standard padding for text */
	background-color: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	border: 1px solid var(--vscode-button-border, transparent); /* Use button border */
	border-radius: 2px; /* Slight rounding */
	cursor: pointer;
	font-size: var(--vscode-font-size); /* Use standard font size */
	text-align: center;
	min-width: 40px; /* Ensure some minimum width */
}

/* Hover styles */
.chat-controls button:hover,
.key-management-controls button:hover,
#input-container button:hover,
#add-key-button:hover {
	background-color: var(--vscode-button-hoverBackground);
}

/* Disabled state */
.chat-controls button:disabled,
.key-management-controls button:disabled,
#input-container button:disabled,
#add-key-button:disabled {
	opacity: 0.6;
	cursor: not-allowed;
	background-color: var(
		--vscode-button-secondaryBackground
	); /* Use secondary style for disabled */
	color: var(--vscode-button-secondaryForeground);
}

/* Style for the dynamically added plan confirmation container */
#plan-confirmation-container {
	border: 1px solid var(--vscode-inputOption-activeBorder);
	background-color: var(--vscode-inputOption-activeBackground);
	padding: 10px;
	margin-top: 10px; /* Add margin below chat */
	margin-bottom: 10px; /* Add margin above input */
	text-align: center;
	border-radius: 4px;
	flex-shrink: 0; /* Prevent shrinking */
	/* display: none; is handled by JS */
}

#plan-confirmation-container p {
	margin-top: 0;
	margin-bottom: 8px;
	color: var(--vscode-inputOption-activeForeground);
}

#plan-confirmation-container button {
	margin: 0 5px;
	padding: 4px 8px; /* Smaller buttons */
	background-color: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	border: 1px solid var(--vscode-button-border, transparent);
}
#plan-confirmation-container button:hover {
	background-color: var(--vscode-button-hoverBackground);
}

/* Ensure chat container doesn't push input off-screen when confirmation is shown */
/* No specific changes needed if flexbox handles shrinking correctly */
